(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Hv:()=>L,Pb:()=>j,HG:()=>f,bM:()=>T,kv:()=>b,rR:()=>A,Wi:()=>S});class t{constructor(e){this.name=e,this.tasks=[]}addTask(e){this.tasks.push(e)}removeTask(e){this.tasks=this.tasks.filter((t=>t.name!==e))}getTasks(){return this.tasks}}class n{constructor(e,t,n,r){this.name=e,this.description=t,this.dueDate=n,this.priority=r}}const r=document.getElementById("add-project"),s=document.getElementById("new-task"),o=document.getElementById("task"),c=document.getElementById("project"),a=document.getElementById("projects"),i=document.querySelector(".list-container ol"),d=document.getElementById("details"),l=document.getElementById("task-editor"),u=document.getElementById("project-editor"),m=document.querySelector(".close-task-modal"),p=document.querySelector(".close-project-modal"),v=document.getElementById("tasks"),h=document.querySelector("#sidebar li");function k(){const e=document.querySelector(".selected")?.getAttribute("project-id");a.innerHTML="",b.forEach(((t,n)=>{const r=function(e,t){const n=document.createElement("div"),r=document.createElement("span");n.classList.add("project-wrapper"),r.innerText="-",r.setAttribute("id","remove-project"),r.addEventListener("click",(()=>{A(t),i.innerHTML=""}));const s=document.createElement("li");return s.innerText=e.name,s.setAttribute("project-id",t),s.addEventListener("click",(t=>{const n=document.querySelector(".selected");n&&n.classList.remove("selected"),t.currentTarget.classList.add("selected"),E(e)})),n.appendChild(s),n.appendChild(r),n}(t,n);a.appendChild(r),n.toString()===e&&r.classList.add("selected")}))}function g(e,t){const n=document.createElement("h2"),r=document.createElement("button"),s=document.querySelector(".details-inner");r.innerText="Ã—",r.classList.add("close-modal"),s.innerHTML="",n.innerText=`${t.name}`,s.appendChild(r),s.appendChild(n),r.addEventListener("click",(()=>{w(d)}));const o=document.createElement("p");o.setAttribute("id",`${e}`),o.innerHTML=`<strong>Project: </strong> ${e}`,s.appendChild(o);const c=Object.entries(t);for(let e=1;e<c.length;e++){const[t,n]=c[e],r=f(t),o=f(n),a=document.createElement("p");a.setAttribute("id",`${r}`),a.innerHTML=`<strong>${r}: </strong> ${o}`,s.appendChild(a)}}function E(e){i.innerHTML="",e.getTasks().forEach((t=>{const n=document.createElement("li");n.innerText=t.name;const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class","w-6 h-6 text-gray-800 remove-task dark:text-white"),r.setAttribute("aria-hidden","true"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("fill","none"),r.setAttribute("viewBox","0 0 24 24");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("stroke","currentColor"),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-width","2"),s.setAttribute("d","M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"),r.appendChild(s),n.appendChild(r),n.querySelector(".remove-task").addEventListener("click",(r=>{r.stopPropagation(),e.removeTask(t.name),n.remove(),S()})),n.addEventListener("click",(()=>{g(e.name,t),y(d)})),i.appendChild(n)}))}function w(e){e.classList.remove("open")}function y(e){e.classList.add("open")}m.addEventListener("click",(e=>{e.preventDefault(),l.classList.remove("open")})),p.addEventListener("click",(e=>{e.preventDefault(),u.classList.remove("open")})),r.addEventListener("click",(()=>{y(u)})),s.addEventListener("click",(()=>{y(l)})),o.addEventListener("submit",(e=>{j(),e.preventDefault(),w(l),o.reset()})),c.addEventListener("submit",(e=>{L(),e.preventDefault(),w(u),c.reset()})),h.addEventListener("click",(e=>{const t=document.querySelector(".selected");t&&t.classList.remove("selected"),e.currentTarget.classList.add("selected")})),v.addEventListener("click",(()=>{i.innerHTML="",b.forEach((e=>{e.getTasks().forEach((t=>{const n=document.createElement("li");n.innerText=t.name;const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class","w-6 h-6 text-gray-800 remove-task dark:text-white"),r.setAttribute("aria-hidden","true"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("fill","none"),r.setAttribute("viewBox","0 0 24 24");const s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("stroke","currentColor"),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-width","2"),s.setAttribute("d","M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"),r.appendChild(s),n.appendChild(r),n.querySelector(".remove-task").addEventListener("click",(r=>{r.stopPropagation(),e.removeTask(t.name),n.remove()})),n.addEventListener("click",(()=>{g(e.name,t),y(d)})),i.appendChild(n)}))}))})),window.addEventListener("load",(()=>{T(),k()}));const b=[];function f(e){return e.replace(/([A-Z])/," $1").replace(/^./,(e=>e.toUpperCase()))}function L(){const e=document.querySelector("#project-name").value,n=new t(e);b.push(n),S(),k()}function A(e){b.splice(e,1),k(),S()}function j(){const{name:e,description:t,date:r,priority:s,selectedElement:o,form:c}=function(){const e=document.getElementById("task-name").value,t=document.getElementById("task-desc").value,n=document.getElementById("due-date").value,r=document.querySelector("input[name='priority']:checked").value,s=document.querySelector(".selected"),o=document.getElementsByName("task")[0];if(s)return{name:e,description:t,date:n,priority:r,selectedElement:s,form:o};alert("Please select a project first before adding tasks.")}(),a=b[o.getAttribute("project-id")],i=new n(e,t,r,s);a.addTask(i),E(a),S(),c.reset()}function S(){const e=localStorage.getItem("projectKey");let t;t=e?JSON.parse(e):{projects:[]},t.projects=b.map((e=>({name:e.name,tasks:e.tasks}))),localStorage.setItem("projectKey",JSON.stringify(t))}function T(){const e=localStorage.getItem("projectKey");if(e){const r=JSON.parse(e);b.splice(0),r.projects.forEach((e=>{const r=new t(e.name);e.tasks.forEach((e=>{const t=new n(e.name,e.description,e.dueDate,e.priority);r.addTask(t)})),b.push(r)}))}}})();